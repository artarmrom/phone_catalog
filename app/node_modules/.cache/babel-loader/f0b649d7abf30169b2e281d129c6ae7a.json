{"ast":null,"code":"var _jsxFileName = \"/Users/aarmario/Documents/MyRepos/phone_catalog/app/src/Pages/PhoneActions/PhoneModal/PhoneModal.js\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\nimport { ListItemIcon } from \"@mui/material\";\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemText from \"@mui/material/ListItemText\";\nimport List from \"@mui/material/List\";\nimport Modal from '@mui/material/Modal';\nimport Button from '@mui/material/Button';\nimport Fade from \"@material-ui/core/Fade\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport PhoneTextfield from './PhoneTextfield';\nimport ImageCropper from '../../../Components/ImageCropper/ImageCropper';\nimport getCroppedImg from '../../../Components/ImageCropper/CropperFunction';\nimport firestore from '../../../settings/firebase';\nimport firebase from 'firebase';\nimport './phoneModal.css';\nimport EditIcon from \"@mui/icons-material/Edit\";\nimport IconButton from \"@mui/material/IconButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    overflowY: 'scroll'\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    alignSelf: 'baseline'\n  }\n}));\nexport default function PhoneModal(props) {\n  _s();\n\n  const classes = useStyles();\n  const [name, setName] = React.useState('');\n  const [manufacturer, setManufacturer] = React.useState('');\n  const [description, setDescription] = React.useState('');\n  const [color, setColor] = React.useState('');\n  const [price, setPrice] = React.useState('');\n  const [screen, setScreen] = React.useState('');\n  const [processor, setProcessor] = React.useState('');\n  const [ram, setRam] = React.useState('');\n  const [phoneImage, setPhoneImage] = React.useState();\n  const [croppedAreaPixels, setCroppedAreaPixels] = React.useState();\n  const [croppedImageData, setCroppedImageData] = React.useState();\n  const [errorTextName, setErrorTextName] = React.useState('');\n  const [errorTextManufacturer, setErrorTextManufacturer] = React.useState('');\n  const [errorTextDescription, setErrorTextDescription] = React.useState('');\n  const [errorTextColor, setErrorTextColor] = React.useState('');\n  const [errorTextPrice, setErrorTextPrice] = React.useState('');\n  const [errorTextScreen, setErrorTextScreen] = React.useState('');\n  const [errorTextProcessor, setErrorTextProcessor] = React.useState('');\n  const [errorTextRam, setErrorTextRam] = React.useState('');\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => setOpen(true);\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const changeName = e => {\n    if (e.target.value !== '') {\n      setName(e.target.value);\n    } else {\n      setName(e.target.value);\n      setErrorTextName('Empty field');\n    }\n  };\n\n  const changeManufacturer = e => {\n    if (e.target.value !== '') {\n      setManufacturer(e.target.value);\n    } else {\n      setManufacturer(e.target.value);\n      setErrorTextManufacturer('Empty field');\n    }\n  };\n\n  const changeDescription = e => {\n    if (e.target.value !== '') {\n      setDescription(e.target.value);\n    } else {\n      setDescription(e.target.value);\n      setErrorTextDescription('Empty field');\n    }\n  };\n\n  const changeColor = e => {\n    if (e.target.value !== '') {\n      setColor(e.target.value);\n    } else {\n      setColor(e.target.value);\n      setErrorTextColor('Empty field');\n    }\n  };\n\n  const changePrice = e => {\n    if (!isNaN(parseInt(e.target.value)) && e.target.value !== '') {\n      setPrice(parseInt(e.target.value));\n      setErrorTextPrice('');\n    } else if (e.target.value === '') {\n      setPrice(e.target.value);\n      setErrorTextPrice('Empty field');\n    } else {\n      setPrice(e.target.value);\n      setErrorTextPrice('Must be number');\n    }\n  };\n\n  const changeScreen = e => {\n    if (e.target.value !== '') {\n      setScreen(e.target.value);\n    } else {\n      setScreen(e.target.value);\n      setErrorTextScreen('Empty field');\n    }\n  };\n\n  const changeProcessor = e => {\n    if (e.target.value !== '') {\n      setProcessor(e.target.value);\n    } else {\n      setProcessor(e.target.value);\n      setErrorTextProcessor('Empty field');\n    }\n  };\n\n  const changeRam = e => {\n    if (!isNaN(parseInt(e.target.value)) && e.target.value !== '') {\n      setRam(parseInt(e.target.value));\n      setErrorTextRam('');\n    } else if (e.target.value === '') {\n      setRam(e.target.value);\n      setErrorTextRam('Empty field');\n    } else {\n      setRam(e.target.value);\n      setErrorTextRam('Must be number');\n    }\n  };\n\n  const changePhoneImage = e => {\n    const reader = new FileReader();\n    reader.readAsDataURL(e.target.files[0]);\n    reader.addEventListener(\"load\", () => {\n      setPhoneImage(reader.result);\n    });\n  };\n\n  React.useEffect(() => {\n    if (props.type === 'edit') {\n      setData();\n    }\n  }, [props.phone]);\n  React.useEffect(() => {\n    if (phoneImage && croppedAreaPixels) {\n      showCroppedImage(phoneImage, croppedAreaPixels);\n    }\n  }, [phoneImage, croppedAreaPixels]);\n\n  function getResizeValues(croppedArea, croppedAreaPixels) {\n    setCroppedAreaPixels(croppedAreaPixels);\n  }\n\n  const showCroppedImage = async (phoneImageInput, croppedAreaInput) => {\n    try {\n      console.log(phoneImageInput);\n      console.log(croppedAreaInput);\n      const croppedImage = await getCroppedImg(phoneImageInput, croppedAreaInput);\n      console.log(croppedImage);\n      const reader = new FileReader();\n      reader.readAsDataURL(croppedImage);\n      reader.addEventListener(\"load\", () => {\n        setCroppedImageData(croppedImage);\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const cleanData = () => {\n    setName('');\n    setDescription('');\n    setManufacturer('');\n    setColor('');\n    setPrice('');\n    setScreen('');\n    setProcessor('');\n    setRam('');\n    setCroppedImageData(undefined);\n    setPhoneImage(undefined);\n  };\n\n  const setData = () => {\n    setName(props.phone.name);\n    setDescription(props.phone.description);\n    setManufacturer(props.phone.manufacturer);\n    setColor(props.phone.color);\n    setPrice(props.phone.price);\n    setScreen(props.phone.screen);\n    setProcessor(props.phone.processor);\n    setRam(props.phone.ram);\n    setPhoneImage(props.phone.imageFileName);\n  };\n\n  const storagePhone = async () => {\n    let object = {};\n    object.id = props.id;\n    object.name = name;\n    object.manufacturer = manufacturer;\n    object.description = description;\n    object.color = color;\n    object.price = price;\n    object.screen = screen;\n    object.processor = processor;\n    object.ram = ram;\n    const storageRef = firebase.storage().ref();\n    const fileRef = storageRef.child(name.trim() + '.png');\n    await fileRef.put(croppedImageData);\n    object.imageFileName = await fileRef.getDownloadURL();\n    cleanData();\n    props.saveData(object);\n    props.setPhone(object);\n    handleClose();\n  };\n\n  let button;\n\n  if (props.type === \"create\") {\n    button = /*#__PURE__*/_jsxDEV(List, {\n      onClick: handleOpen,\n      component: \"div\",\n      disablePadding: true,\n      style: {\n        marginLeft: '1%'\n      },\n      children: /*#__PURE__*/_jsxDEV(ListItemButton, {\n        children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n          children: /*#__PURE__*/_jsxDEV(AddCircleIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n          primary: 'Add new phone'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }, this);\n  } else if (props.type === 'edit') {\n    button = /*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: handleOpen,\n      \"aria-label\": \"remove\",\n      children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }, this);\n  }\n\n  const checkAllData = () => {\n    let check = name !== '' && manufacturer !== '' && description !== '' && color !== '' && errorTextPrice === '' && screen !== '' && processor !== '' && errorTextRam === '' && croppedImageData;\n    return check;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [button, /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: handleClose,\n      className: classes.modal,\n      \"aria-labelledby\": \"modal-modal-title\",\n      \"aria-describedby\": \"modal-modal-description\",\n      children: /*#__PURE__*/_jsxDEV(Fade, {\n        in: open,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"modal-div\",\n          className: classes.paper,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"top-modal-div\",\n            className: \"top-modal-div\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"create-phone-title\",\n              children: \"Create new phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(CloseIcon, {\n              onClick: handleClose,\n              className: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(PhoneTextfield, {\n              handleChange: changeName,\n              value: name,\n              text: \"Name\",\n              placeholder: \"Insert name\",\n              error: name === '',\n              errorText: errorTextName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(PhoneTextfield, {\n              handleChange: changeManufacturer,\n              value: manufacturer,\n              text: \"Manufacturer\",\n              placeholder: \"Insert manufacturer\",\n              error: manufacturer === '',\n              errorText: errorTextManufacturer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(PhoneTextfield, {\n              handleChange: changeDescription,\n              value: description,\n              text: \"Description\",\n              placeholder: \"Insert description\",\n              error: description === '',\n              errorText: errorTextDescription\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(PhoneTextfield, {\n              handleChange: changeColor,\n              value: color,\n              text: \"Color\",\n              placeholder: \"Insert color\",\n              error: color === '',\n              errorText: errorTextColor\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(PhoneTextfield, {\n              handleChange: changePrice,\n              value: price,\n              text: \"Price\",\n              placeholder: \"Insert price\",\n              error: price !== undefined,\n              errorText: errorTextPrice\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(PhoneTextfield, {\n              handleChange: changeScreen,\n              value: screen,\n              text: \"Screen\",\n              placeholder: \"Insert screen\",\n              error: screen === '',\n              errorText: errorTextScreen\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(PhoneTextfield, {\n              handleChange: changeProcessor,\n              value: processor,\n              text: \"Processor\",\n              placeholder: \"Insert processor\",\n              error: processor === '',\n              errorText: errorTextProcessor\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(PhoneTextfield, {\n              handleChange: changeRam,\n              value: ram,\n              text: \"RAM\",\n              placeholder: \"Insert ram\",\n              error: ram !== undefined,\n              errorText: errorTextRam\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"text\",\n              component: \"label\",\n              children: [\"Upload phone image\", /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"resource-input-rrhh\",\n                type: \"file\",\n                accept: \"image/png\",\n                onChange: changePhoneImage,\n                alt: \"Insert phone image\",\n                hidden: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 88\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: phoneImage !== undefined ? /*#__PURE__*/_jsxDEV(ImageCropper, {\n                getResizeValues: getResizeValues,\n                phoneImage: phoneImage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 61\n              }, this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"buttons-group\",\n              children: [checkAllData() ? /*#__PURE__*/_jsxDEV(Button, {\n                onClick: storagePhone,\n                variant: \"contained\",\n                children: \"Confirm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                disabled: true,\n                children: \"Confirm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleClose,\n                variant: \"outlined\",\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PhoneModal, \"6G3M/3SK4ajgcJRw9kZggB2nsFs=\", false, function () {\n  return [useStyles];\n});\n\n_c = PhoneModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"PhoneModal\");","map":{"version":3,"sources":["/Users/aarmario/Documents/MyRepos/phone_catalog/app/src/Pages/PhoneActions/PhoneModal/PhoneModal.js"],"names":["React","AddCircleIcon","ListItemIcon","ListItemButton","ListItemText","List","Modal","Button","Fade","makeStyles","CloseIcon","PhoneTextfield","ImageCropper","getCroppedImg","firestore","firebase","EditIcon","IconButton","useStyles","theme","modal","display","alignItems","justifyContent","overflowY","paper","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","alignSelf","PhoneModal","props","classes","name","setName","useState","manufacturer","setManufacturer","description","setDescription","color","setColor","price","setPrice","screen","setScreen","processor","setProcessor","ram","setRam","phoneImage","setPhoneImage","croppedAreaPixels","setCroppedAreaPixels","croppedImageData","setCroppedImageData","errorTextName","setErrorTextName","errorTextManufacturer","setErrorTextManufacturer","errorTextDescription","setErrorTextDescription","errorTextColor","setErrorTextColor","errorTextPrice","setErrorTextPrice","errorTextScreen","setErrorTextScreen","errorTextProcessor","setErrorTextProcessor","errorTextRam","setErrorTextRam","open","setOpen","handleOpen","handleClose","changeName","e","target","value","changeManufacturer","changeDescription","changeColor","changePrice","isNaN","parseInt","changeScreen","changeProcessor","changeRam","changePhoneImage","reader","FileReader","readAsDataURL","files","addEventListener","result","useEffect","type","setData","phone","showCroppedImage","getResizeValues","croppedArea","phoneImageInput","croppedAreaInput","console","log","croppedImage","error","cleanData","undefined","imageFileName","storagePhone","object","id","storageRef","storage","ref","fileRef","child","trim","put","getDownloadURL","saveData","setPhone","button","marginLeft","checkAllData","check"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\nimport {ListItemIcon} from \"@mui/material\";\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemText from \"@mui/material/ListItemText\";\nimport List from \"@mui/material/List\";\nimport Modal from '@mui/material/Modal';\nimport Button from '@mui/material/Button';\nimport Fade from \"@material-ui/core/Fade\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport PhoneTextfield from './PhoneTextfield'\nimport ImageCropper from '../../../Components/ImageCropper/ImageCropper';\nimport getCroppedImg from '../../../Components/ImageCropper/CropperFunction';\nimport firestore from '../../../settings/firebase';\nimport firebase from 'firebase';\n\nimport './phoneModal.css'\nimport EditIcon from \"@mui/icons-material/Edit\";\nimport IconButton from \"@mui/material/IconButton\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    modal: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        overflowY: 'scroll'\n    },\n    paper: {\n        backgroundColor: theme.palette.background.paper,\n        border: '2px solid #000',\n        boxShadow: theme.shadows[5],\n        padding: theme.spacing(2, 4, 3),\n        alignSelf: 'baseline'\n    }\n}));\n\nexport default function PhoneModal(props){\n    const classes = useStyles();\n    const [name, setName] = React.useState('');\n    const [manufacturer, setManufacturer] = React.useState('');\n    const [description, setDescription] = React.useState('');\n    const [color, setColor] = React.useState('');\n    const [price, setPrice] = React.useState('');\n    const [screen, setScreen] = React.useState('');\n    const [processor, setProcessor] = React.useState('');\n    const [ram, setRam] = React.useState('');\n    const [phoneImage, setPhoneImage] = React.useState();\n    const [croppedAreaPixels, setCroppedAreaPixels] = React.useState();\n    const [croppedImageData, setCroppedImageData] = React.useState();\n    const [errorTextName, setErrorTextName] = React.useState('');\n    const [errorTextManufacturer, setErrorTextManufacturer] = React.useState('');\n    const [errorTextDescription, setErrorTextDescription] = React.useState('');\n    const [errorTextColor, setErrorTextColor] = React.useState('');\n    const [errorTextPrice, setErrorTextPrice] = React.useState('');\n    const [errorTextScreen, setErrorTextScreen] = React.useState('');\n    const [errorTextProcessor, setErrorTextProcessor] = React.useState('');\n    const [errorTextRam, setErrorTextRam] = React.useState('');\n    const [open, setOpen] = React.useState(false);\n    const handleOpen = () => setOpen(true);\n    const handleClose = () => {setOpen(false);};\n    const changeName = (e) => {if(e.target.value!==''){setName(e.target.value)}else{setName(e.target.value);setErrorTextName('Empty field')}};\n    const changeManufacturer = (e) => {if(e.target.value!==''){setManufacturer(e.target.value)}else{setManufacturer(e.target.value);setErrorTextManufacturer('Empty field')}};\n    const changeDescription = (e) => {if(e.target.value!==''){setDescription(e.target.value)}else{setDescription(e.target.value);setErrorTextDescription('Empty field')}};\n    const changeColor = (e) => {if(e.target.value!==''){setColor(e.target.value)}else{setColor(e.target.value);setErrorTextColor('Empty field')}};\n    const changePrice = (e) => {if(!isNaN(parseInt(e.target.value)) && e.target.value!==''){setPrice(parseInt(e.target.value));setErrorTextPrice('')}else if(e.target.value===''){setPrice(e.target.value);setErrorTextPrice('Empty field')}else{setPrice(e.target.value);setErrorTextPrice('Must be number')}};\n    const changeScreen = (e) => {if(e.target.value!==''){setScreen(e.target.value)}else{setScreen(e.target.value);setErrorTextScreen('Empty field')}};\n    const changeProcessor = (e) => {if(e.target.value!==''){setProcessor(e.target.value)}else{setProcessor(e.target.value);setErrorTextProcessor('Empty field')}};\n    const changeRam = (e) => {if(!isNaN(parseInt(e.target.value)) && e.target.value!==''){setRam(parseInt(e.target.value));setErrorTextRam('')}else if(e.target.value===''){setRam(e.target.value);setErrorTextRam('Empty field')}else{setRam(e.target.value);setErrorTextRam('Must be number')}};\n    const changePhoneImage = (e) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(e.target.files[0])\n        reader.addEventListener(\"load\",()=>{\n            setPhoneImage(reader.result)\n        })\n    };\n\n    React.useEffect(()=>{\n        if(props.type==='edit'){\n            setData()\n        }\n    },[props.phone])\n\n    React.useEffect(()=>{\n        if(phoneImage && croppedAreaPixels){\n            showCroppedImage(phoneImage,croppedAreaPixels)\n        }\n    },[phoneImage, croppedAreaPixels])\n\n    function getResizeValues(croppedArea, croppedAreaPixels) {\n        setCroppedAreaPixels(croppedAreaPixels)\n    }\n\n    const showCroppedImage = async (phoneImageInput, croppedAreaInput) => {\n        try {\n            console.log(phoneImageInput)\n            console.log(croppedAreaInput)\n            const croppedImage = await getCroppedImg(\n                phoneImageInput,\n                croppedAreaInput,\n            )\n            console.log(croppedImage)\n            const reader = new FileReader();\n            reader.readAsDataURL(croppedImage)\n            reader.addEventListener(\"load\",()=>{\n                setCroppedImageData(croppedImage)\n            })\n        } catch (error) {\n            console.error(error)\n        }\n    }\n\n    const cleanData = () =>{\n        setName('')\n        setDescription('')\n        setManufacturer('')\n        setColor('')\n        setPrice('')\n        setScreen('')\n        setProcessor('')\n        setRam('')\n        setCroppedImageData(undefined)\n        setPhoneImage(undefined)\n    }\n\n    const setData = () =>{\n        setName(props.phone.name)\n        setDescription(props.phone.description)\n        setManufacturer(props.phone.manufacturer)\n        setColor(props.phone.color)\n        setPrice(props.phone.price)\n        setScreen(props.phone.screen)\n        setProcessor(props.phone.processor)\n        setRam(props.phone.ram)\n        setPhoneImage(props.phone.imageFileName)\n    }\n\n    const storagePhone = async () =>{\n        let object={};\n        object.id=props.id;\n        object.name=name;\n        object.manufacturer=manufacturer;\n        object.description=description;\n        object.color=color;\n        object.price=price;\n        object.screen=screen;\n        object.processor=processor;\n        object.ram=ram;\n        const storageRef = firebase.storage().ref();\n        const fileRef = storageRef.child(name.trim()+'.png');\n        await fileRef.put(croppedImageData);\n        object.imageFileName = await fileRef.getDownloadURL();\n        cleanData()\n        props.saveData(object);\n        props.setPhone(object)\n        handleClose()\n    }\n\n    let button;\n\n    if(props.type===\"create\"){\n         button = <List onClick={handleOpen} component=\"div\" disablePadding style={{marginLeft:'1%'}}>\n            <ListItemButton>\n                <ListItemIcon >\n                    <AddCircleIcon />\n                </ListItemIcon>\n                <ListItemText primary={'Add new phone'} />\n            </ListItemButton>\n        </List>\n    }else if(props.type==='edit'){\n        button =\n            <IconButton onClick={handleOpen} aria-label=\"remove\">\n                <EditIcon/>\n            </IconButton>\n    }\n\n\n    const checkAllData = () => {\n        let check = name !== '' && manufacturer !== '' && description !== '' && color !== '' && errorTextPrice === '' && screen !== '' && processor !== '' && errorTextRam === '' && croppedImageData;\n        return check\n    }\n\n    return(\n        <div>\n            {button}\n            <Modal\n                open={open}\n                onClose={handleClose}\n                className={classes.modal}\n                aria-labelledby=\"modal-modal-title\"\n                aria-describedby=\"modal-modal-description\"\n            >\n                <Fade in={open}>\n                    <div id=\"modal-div\" className={classes.paper}>\n                        <div id='top-modal-div' className='top-modal-div'>\n                            <h2 className='create-phone-title'>Create new phone</h2>\n                            <CloseIcon onClick={handleClose} className=\"\"/>\n                        </div>\n                        <div>\n                            <PhoneTextfield handleChange={changeName} value={name} text=\"Name\" placeholder=\"Insert name\" error={name===''} errorText={errorTextName}/>\n                            <PhoneTextfield handleChange={changeManufacturer} value={manufacturer} text=\"Manufacturer\" placeholder=\"Insert manufacturer\" error={manufacturer===''} errorText={errorTextManufacturer}/>\n                            <PhoneTextfield handleChange={changeDescription} value={description} text=\"Description\" placeholder=\"Insert description\" error={description===''} errorText={errorTextDescription}/>\n                            <PhoneTextfield handleChange={changeColor} value={color} text=\"Color\" placeholder=\"Insert color\" error={color===''} errorText={errorTextColor}/>\n                            <PhoneTextfield handleChange={changePrice} value={price} text=\"Price\" placeholder=\"Insert price\" error={price!==undefined} errorText={errorTextPrice}/>\n                            <PhoneTextfield handleChange={changeScreen} value={screen} text=\"Screen\" placeholder=\"Insert screen\" error={screen===''} errorText={errorTextScreen}/>\n                            <PhoneTextfield handleChange={changeProcessor} value={processor} text=\"Processor\" placeholder=\"Insert processor\" error={processor===''} errorText={errorTextProcessor}/>\n                            <PhoneTextfield handleChange={changeRam} value={ram} text=\"RAM\" placeholder=\"Insert ram\" error={ram!==undefined} errorText={errorTextRam}/>\n                            <Button variant=\"text\" component=\"label\">Upload phone image<input className='resource-input-rrhh' type=\"file\" accept=\"image/png\" onChange={changePhoneImage} alt=\"Insert phone image\" hidden/></Button>\n                            <div>\n                                {phoneImage !== undefined ? <ImageCropper getResizeValues={getResizeValues} phoneImage={phoneImage}/>:null}\n                            </div>\n                            <div className='buttons-group'>\n                                {checkAllData()?\n                                    <Button onClick={storagePhone} variant=\"contained\" >Confirm</Button>:\n                                    <Button disabled>Confirm</Button>\n                                }\n                                <Button onClick={handleClose} variant=\"outlined\">Cancel</Button>\n                            </div>\n                        </div>\n                    </div>\n                </Fade>\n            </Modal>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}